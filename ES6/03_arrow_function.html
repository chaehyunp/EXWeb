<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS es6 arrow function</title>
</head>
<body>
    <script>
        //3. 화살표 함수 (Arrow Function) - JAVA/KOTLIN 람다 표기

        //1) 일반적인 선언적 함수
        function show(){
            document.write("show!<br>")
        }

        //2) 함수를 변수에 저장하여 사용 - 익명함수
        let output = function(){
            document.write("output<br>")
        }
        //익명함수 객체를 가지고 있는 output 변수를 함수명처럼 사용하여 함수 호출
        output()

        //3) 위 '익명함수'를 화살표 함수로 변경하여 사용해보기
        let display = ()=>{
            document.write("display<br>")
        }
        display()

        //당연히 화살표 함수도 파라미터를 받을 수 있음
        let display2 = (name)=>{
            document.write("display2" + name + "<br>")
        }

        display2("Sam")

        //4) 화살표 함수의 간단 표기법
        //4.1) 파라미터가 1개뿐이라면 ()를 생략할 수 있음
        let display3 = name =>{
            document.write("display3" + name + "<br>")
        }
        display3("Robin")

        //4.2) 함수의 실행문이 한 줄이라면 {}생략 가능
        let display4 = name => document.write("display4" + name + "<br>")
        display4("Kim")

        //파라미터 0개일때는 () 생략 불가
        let display5 = () => document.write("display5<br>")
        display5()

        //파라미터 2개 이상일때는 () 생략 불가
        let display6 = (name,age) => document.write(`display6 : ${name},${age} <br>`)
        display6("Robin",25)

    </script>

    <hr>

    <!-- 일반적으로 화살표 함수는 이벤트 처리의 콜백 함수로 많이 사용됨 -->
    <button id="b1">button</button>
    <h4 id="hh">Hello</h4>


    <script>
        //버튼 클릭하여 h4 요소 글씨 변경
        //버튼에 클릭 이벤트 달기
        //1) 예전방식
        let b1 = document.getElementById('b1')
        b1.onclick = function(){
            document.getElementById('hh').innerHTML = "clicked"
        }

        document.querySelector('#hh').innerHTML = ""

        //2) 화살표 함수 이용
        b1.onclick = ()=> document.getElementById('hh').innerHTML = "clicked"

        //2. 반복문 ㅊ리에도 자주 활용됨
        let aaa = new Array(10,20,30)

        //반복문을 이용하여 배열의 요소들을 h4요소에 출력
        for(let i = 0; i<aaa.length; i++){
            document.querySelector('#hh').innerHTML += aaa[i] + "<br>"
        }

        //in 키워드를 이용하여 배열의 인덱스번호를 실수없이 사용
        for (index in aaa){
            document.querySelector('#hh').innerHTML += aaa[index] + "<br>"
        }
        document.write(`<br>`)

        //in도 번거로움 - aaa[]형태의 코드가 지저분
        //배열의 요소접근 기능 메소드 활용 forEach(), map()
        //배열요소에 접근할때마다 파라미터의 함수가 호출됨
        aaa.forEach(function(value, index, array){
            document.write(`${index} : ${value}<br>`)
        })
        //만약 요소값 value만 사용하고 싶다면
        aaa.forEach(function(value){
            document.write(`${value}<br>`)
        })
        document.write(`<br>`)

        //이때 파라미터로 지정한 콜백함수를 화살표 함수로
        aaa.forEach (value => document.write(`${value}<br>`))

        //또 다른 배열요소 접근 기능메소드 이용 : map() - forEach와 다르게 return이 있음
        //배열의 요소값들을 모두 1증가 시키고 싶을때
        //콜백함수에서 리턴한 값들을 새로운 배열요소로 만들어 추가, 그 배열을 리턴
        //리턴된 bbb는 새로운 배열 - aaa배열과 갯수 똑같음 (그만큼 반복하기 때문에)
        let bbb = aaa.map(function(value){
            return value+1
        })
        document.write(bbb)

        //위 작업을 화살표 함수로 처리
        let ccc = aaa.map(value => {return value+1})
        document.write(ccc)

        //실행문이 한 줄이면 {} 생략 가능
        // let ddd = aaa.map(value => return value+1) //ERROR - 실행문 한 줄이 return일때는 return 키워드도 생략해야함
        let ddd = aaa.map(value => vlaue+1)
        document.write(ddd)

        //익명함수와 화살표 함수 안에서 this는 다른의미를 가짐 - ReactNative에서 소개

    </script>
</body>
</html>